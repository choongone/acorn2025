<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <style>
        .chart-card {
            height: 350px;
        }
        #barChart {
            width: 100%;
            height: 100%;
        }
        h4 {
            font-size: 1.2rem;
        }
    </style>
    <title>Document</title>
</head>
<body>
    <h2>문제</h2>
    <p>
        MariaDB에 저장된 jikwon, buser 테이블을 이용하여 아래의 문제에 답하시오.
    </p>
    <p>
        Django 모듈을 사용하여 결과를 클라이언트 브라우저로 출력하시오.
    </p>

    <ol >
        <li >
            <h4>
               사번, 직원명, 부서명, 직급, 연봉, 근무년수를 DataFrame에 기억 후 출력하시오. (join) <br>
            : 부서번호, 직원명 순으로 오름 차순 정렬 
            </h4>
            {{ basic_html|safe }}
        </li>
        <li >
            <h4>
                부서명, 직급 자료를 이용하여  각각 연봉합, 연봉평균을 구하시오.
            </h4>
            <div class="row">
                <div class="col">
                    {{ buser_salary_html|safe }}
                </div>
                <div class="col">
                    {{ jikjik_salary_html|safe }}  
                </div>
            </div>
            
        </li>
        <li >
            <h4>
                부서명별 연봉합, 평균을 이용하여 세로막대 그래프를 출력하시오.
            </h4>
            <div class="card chart-card">
                <div id="barChart"></div>
            </div>
            
        </li>
        <li >
            <h4>
                성별, 직급별 빈도표를 출력하시오.
            </h4>
            {{ gender_position_html|safe }}
        </li>
    </ol>
<script src="
https://cdn.jsdelivr.net/npm/echarts@6.0.0/dist/echarts.min.js
"></script>
<script>
    const labels = {{ buser_labels_json|safe }};
    const means = {{ buser_means_json|safe }};
    const sums = {{ buser_sums_json|safe }};

    const el = document.getElementById('barChart');
    const myChart = echarts.init(el);
    const option = {
        title: {
            text: '부서별 연봉 통계'
        },
        tooltip: {},
        xAxis: {
            data: labels
        },
        yAxis: {},
        series: [
            {
                name: '연봉합계',
                type: 'bar',
                data: sums
            },
            {
                name: '연봉평균',
                type: 'bar',
                data: means
            }
        ]
    };
    myChart.setOption(option);
    window.addEventListener('resize', () => { // 반응형을 위한 창크기 조정
        myChart.resize();
    });
</script>
</body>
</html>